#!/usr/bin/env node

var App = require('../'),
  log = require('npmlog');

var app = new App(),
  argv = require('minimist')(process.argv.slice(2));

if (argv.help) {
  console.log('TODO: write help');
  process.exit();
}

if (argv.dumpbc) {
  app.dumpBlockChain();
} else {
  app.start(function () {
    process.on('SIGTERM', shutdown);
    process.on('SIGINT', shutdown);
  });
}

function shutdown() {
  log.info('app', 'shutting down');
  app.stop(process.exit);
}
